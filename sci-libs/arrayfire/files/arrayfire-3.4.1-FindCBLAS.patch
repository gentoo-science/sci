https://github.com/arrayfire/arrayfire/pull/1657


From 23228318b153bdc5bb30e084f9310b09b1644bd0 Mon Sep 17 00:00:00 2001
From: Marius Brehler <marius.brehler@tu-dortmund.de>
Date: Wed, 30 Nov 2016 14:07:21 +0100
Subject: [PATCH] FindCBLAS.cmake: Fix setting CBLAS_INCLUDE_DIR if PkgConfig
 is used

---
 CMakeModules/FindCBLAS.cmake | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/CMakeModules/FindCBLAS.cmake b/CMakeModules/FindCBLAS.cmake
index fbb646b..058b7d7 100644
--- a/CMakeModules/FindCBLAS.cmake
+++ b/CMakeModules/FindCBLAS.cmake
@@ -39,8 +39,14 @@ IF(PC_CBLAS_FOUND)
     LIST(APPEND CBLAS_LIBRARIES ${${PC_LIB}_LIBRARY})
   ENDFOREACH(PC_LIB)
 
-  FIND_PACKAGE_HANDLE_STANDARD_ARGS(CBLAS DEFAULT_MSG CBLAS_LIBRARIES)
-  MARK_AS_ADVANCED(CBLAS_LIBRARIES)
+  FIND_PATH(CBLAS_INCLUDE_DIRS NAMES cblas.h HINTS ${PC_CBLAS_INCLUDE_DIRS} )
+  IF (NOT CBLAS_INCLUDE_DIRS)
+    message(FATAL_ERROR "Something is wrong in your pkg-config file - cblas.h not found in ${PC_CBLAS_INCLUDE_DIRS}")
+  ENDIF (NOT CBLAS_INCLUDE_DIRS)
+  SET(CBLAS_INCLUDE_DIR ${CBLAS_INCLUDE_DIRS})
+
+  FIND_PACKAGE_HANDLE_STANDARD_ARGS(CBLAS DEFAULT_MSG CBLAS_LIBRARIES CBLAS_INCLUDE_DIR)
+  MARK_AS_ADVANCED(CBLAS_LIBRARIES CBLAS_INCLUDE_DIR)
 
 ELSE(PC_CBLAS_FOUND)
 
-- 
2.7.3

